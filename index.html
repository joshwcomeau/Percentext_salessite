<!DOCTYPE html>
<html>
<head>
  <title>Percentext, a nifty little jQuery plugin.</title>

  <!-- @stylesheet style -->
  <!-- @stylesheet grid -->

  <script src="http://use.edgefonts.net/raleway:n3,n5,n7,n9;bowlby-one.js"></script>
  <!-- @javascript jquery_1.11.1 -->
  <!-- @javascript throttle-debounce_1.1.min -->
  <!-- @javascript patternizr.min -->
  <!-- @javascript patternizr_stripes -->
  <!-- @javascript percentext_1.0 -->
  <!-- @javascript scripts/* -->

  <script>
  $(document).ready(function() {

    var bg_color_classes = [ "bg_navy", "bg_blue", "bg_bbblue", "bg_aqua", "bg_green", "bg_grass", "bg_yellow", "bg_orange" ];
  
    var bgCanvas = document.getElementById('bgCanvas');
     
    function render() {
     
      bgCanvas.patternizer(bgStripes);
     
    }
     
    // resize the canvas to the window size
    function onResize() {
     
      // number of pixels of extra canvas drawn
      var buffer = 100;
   
      // if extra canvas size is less than the buffer amount
      if (bgCanvas.width - window.innerWidth < buffer ||
        bgCanvas.height - window.innerHeight < buffer) {
 
        // resize the canvas to window plus double the buffer
        bgCanvas.width = window.innerWidth + (buffer * 2);
        bgCanvas.height = window.innerHeight + (buffer * 2);
 
        render();
      }   
   
    }
     
    function init() {
        onResize();
        // create a listener for resize
        // cowboy's throttle plugin keeps this event from running hog wild
        window.addEventListener('resize', $.throttle(200, onResize), false);
    }



    // This simple scroller separates the sections by an ever-decreasing margin-top.
    // Starts at 100px when it enters the frame, winds up at 0px by the time it reaches the top.
    function parallax_scroller(boxes) {
      var initial_padding = 100;

      _(boxes).forEach(function(container) {        
        $(window).on("scroll load", function() {

          var 
          elem_top    = $(container).offset().top, 
          scroll_top  = $(window).scrollTop(),
          win_height  = $(window).height(),
          win_top, new_padding, padding_multiplier;

          // We only need to worry about calculations when the top of the container is inside the window.
          if ( scroll_top < elem_top < (scroll_top + win_height) ) {
            win_top = elem_top - scroll_top;
            padding_multiplier = win_top / win_height;
            new_padding = initial_padding * padding_multiplier;

            $(container).css("padding-top", new_padding);
          }

        })
      });

      
    }


    // Function to change the background color of an element depending on its scroll height.
    // Essentially, I want the background color of selected elements to lighten as they move from the bottom of the
    // screen to the top.
    function silly_highlight_effect(lines) {
      var
      start_ratio   = 0.7,
      end_ratio     = 0.3,
      num_of_colors = bg_color_classes.length;

      $(lines).each(function(index) {
        var line = this;

        $(window).on("scroll", function() {
          var 
          elem_top    = $(line).offset().top, 
          scroll_top  = $(window).scrollTop(),
          win_height  = $(window).height(),
          win_top;

          if ( scroll_top < elem_top < (scroll_top + win_height) ) {
            win_top = elem_top - scroll_top;
            progress_multiplier = win_top / win_height;

            if ( end_ratio < progress_multiplier && progress_multiplier < start_ratio ) {
              $(line).addClass('line_effect_highlight');
            } else {
              $(line).removeClass('line_effect_highlight');
            }
          }
        });
      });
    }
     

    init();


    $("#title").percentext({letterSpacing: -4});
    $("#title_caption").percentext({percentage: 40, letterSpacing: -2});
    $("#title_description_desktop").percentext({minFontSize: 18});
    $("#s2_title").percentext();
    $(".line_text").percentext();
    $("#why_percentext_header").percentext({percentage: 75, letterSpacing: -3})


    parallax_scroller(["#section_2", "#section_3"]); 
    silly_highlight_effect(".line_effect");

  });
  </script>

</head>

<body>
  <canvas id="bgCanvas"></canvas>
  <div id="wrapper">
    <section id="section_1">

      <div class="top_black_bars">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </div>

      <div class="title_area">
        <h5 id="title_caption">
          Allow me to introduce
        </h5>
        <h1 id="title">
          Percentext<span class="title_extension">.js</span>
        </h1>

        <div class="divider_with_icon" id="title_divider">
          <div class="icon_holder">
            <img src="percentext_icon.png" class="percentext_icon">
          </div>
        </div>
        
        <h6 id="title_description_desktop">

          The jQuery plugin that adjusts <em>font-size</em> and <em>letter-spacing</em>, so you can set a <em>percentage width</em> for your headers.
        </h6>

        <div id="main_button_holder">
          <div id="button_1_learn_more">Read the Documentation
          </div><div id="button_2_github">Download on GitHub</div>
        </div>
      </div>
    </section>

    <section id="section_2">
      <div class="section_dark_bg">
        <h2 id="s2_title" style="">A Quick Demonstration.</h2>
        <div class="space_taker"></div>

        <div id="section_2_main_wrapper">

          <div id="section_2_text">
            <div class="s2_line">
              <div class="line_text bo">Wouldn't it be nice</div>
              <div class="line_effect"></div>
            </div>
            <div class="s2_line">
              <div class="line_text">if you could style text</div>
              <div class="line_effect"></div>
            </div>
            <div class="s2_line">
              <div class="line_text">just like any other element?</div>
              <div class="line_effect"></div>
            </div>
            <div class="s2_line">
              <div class="line_text">Why specify text in terms of font size</div>
              <div class="line_effect"></div>
            </div>
            <div class="s2_line">
              <div class="line_text">when you specify <em>everything else</em> in terms of width?</div>
              <div class="line_effect"></div>
            </div>
            <div class="s2_line">
              <div class="line_text">I just wanted each of these lines to take up 100% of their parent,</div>
              <div class="line_effect"></div>
            </div>
            <div class="s2_line">
              <div class="line_text">and to do so in a responsive way using CSS alone would have been... unpleasant.</div>
              <div class="line_effect"></div>
            </div>
          </div>

          
        </div>
      </div>
    </section>

    <section id="section_3">
      <div class="section_dark_bg">
        <div class="grid" id="s3_grid">
          <!-- "Why Percentext?" Column -->
          <div class="c8 full_height">
            
            <h2 id="why_percentext_header">Why Percentext?</h2>
            <div id="why_percentext_container">
              <p>Percentext brings traditional DOM arrangement to text-based elements, allowing developers and designers the ability to quickly, easily and responsively size headers to be 'just right' across devices. </p>
              
              <h4>Alternatives</h4>
              <p>Many people who find it irksome to deal with font sizes use <a href="http://fittextjs.com/">FitText.js</a>. FitText is a great little plugin, but it isn't quite the same as Percentext. FitText arbitrarily sets font-size to be equal to a fraction of the parent container's width, allowing users to tweak via a 'compressor' to get the size just right.</p>

              <h4>Pros and Cons</h4>
              <p>Percentext's advantage is that it allows you to set a percentage and be done with it - no tweaking required. The downside to this convenience is performance; FitText is a very simple plugin that works lightning fast. Percentext can be a bit sluggish if you have many headers that you wish to size.</p>

              
            </div>
          </div>
          <!-- -->

          <!-- "How To Use" Column -->
          <div class="c4 full_height">
          
            <div id="mathtools">
              <!-- @include mathtools -->
            </div>
          </div>
          <!-- -->
        </div>
      </div>
      <div class="s3_line_decoration_container">
        <div class="s3_line_decoration"></div>
      </div>
    </section>

  </div>

  

  <footer>
    <a href="/credits">Credits</a>
  </footer>
</body>
</html>